<div class="px-5 mt-5">
    <h2 class="mb-2">All Users</h2>

    <section class="cogni-flex justify-between mb-4">
        <div class="field">
            <input type="text" placeholder="Search by name/email" [(ngModel)]="searchTerm" (input)="filterUsers()"
                class="field-input" />

        </div>

        <select [(ngModel)]="selectedRole" (change)="filterUsers()" class="px-5 py-1.5 border">
            <option value="">All Roles</option>
            <option value="parent">Parent</option>
            <option value="child">Child</option>
            <option value="admin">Admin</option>
        </select>
    </section>

    <div class="overflow-x-auto">
        <table>
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Email</th>
                    <th>Role</th>
                    <th>Parent Id</th>
                    <th>Email Verified</th>
                    <th>Email Token (exists for unverified users)</th>
                    <th>Token Expiration</th>
                </tr>
            </thead>
            <tbody>
                @for (user of filteredUsers(); track user._id) {
                <tr>
                    <td>{{ user.name || 'null'}}</td>
                    <td>{{ user.email || 'null' }}</td>
                    <td>{{ user.role || 'null' }}</td>
                    <td>{{ user.parent_id || 'null' }}</td>
                    <td>{{ user.verified || true }}</td>
                    <td>{{ user.emailToken || 'null' }}</td>
                    <td>{{ user.emailTokenExpires || 'null' }}</td>
                </tr>
                }
            </tbody>
        </table>
    </div>
</div>